## log (로그확인하기)

 docker logs --tail 10 sweet_williamson
 docker logs -f -t [container]

>
2023/04/12 00:18:30 [notice] 1#1: start worker process 41
2023/04/12 00:18:30 [notice] 1#1: start worker process 42
....

## 도커의 이미지란?
1) 도커의 이미지 구조
![이미지](image.png)

레이어 위에 계속 쌓여가는 형태인걸로 확인할수 있다.
단 왼쪽에 있는 이미지 layer는 읽기전용이지만 container layer는 R/w가 가능하다.

## 이미지 레이어 확인하는 방법
docker image inspect mysql ...

## dockerfile 없이 이미지 생성

```
docker run -it --name ~~ ubuntu


echo "hello ubuntu" > my_file
```
contorl + p, q
```
docker commit -a hwkim -m "Add my_file" my-ubuntu my-ubuntu:v1.0.0
```
>결과 (docker images)
```
REPOSITORY   TAG       IMAGE ID       CREATED          SIZE
my-ubuntu    v1.0.0    ec3940a33736   49 seconds ago   77.8MB
```
```
docker image inspect my-ubuntu:v1.0.0
```
"Layers" 안에 생겨있음(1개 더 생겨있음)
"Layers": [
                "sha256:b93c1bd012ab8fda60f5b4f5906bf244586e0e3292d84571d3abb56472248466",
                "sha256:84face56cb3677679ff21ee1d98b8c3923684e0269191436401663bee1dff6d7"
]

원본은
```
 "Layers": [
                "sha256:b93c1bd012ab8fda60f5b4f5906bf244586e0e3292d84571d3abb56472248466"
            ]
```

## Dockerfile 이용한 이미지 생성
Dockerfile은 지시어와 인자값으로 구성되어있음
```
ex)
FROM node:12=alpine
RUN apk add --no-cache python3 g++ make
WORKDIR /app
COPY . .
RUN yarn install --production
CMD ["node","src/index.js"]
```

docker build라는 명령어를 통해서 이미지를 만들수 있음


### 현재 디렉토리를 빌든 컨텍스트로 my-app:v1 이미지 빌드(Dockerfile 이용)
```
docker build -t my-app:v1 ./
```
### -f 옵션을 통해 build할 dockerfile을 지정 (example/MyDockerfile 이용)
```
docker build -t my-app:v1 -f example/MyDockerfile ./
```
### .gitignore와 같이 .dockerignore이 존재함

```
*/temp*
*/*temp*
temp?

*.md
!REDME.md
```

## Dockerfile 문법
>FROM: 어떤베이스이미지를 사용할건지
>LABEL: 이미지의 메타데이터라고 생각하면 되고, 필수로 작성할 필요 없음
>expose: 문서용도로 실제 작동되지는 않음
>CMD: 컨테이너에서 실행될떄 어떤 명령이 수앻할지 결정

### 이미지 압축파일로 저장 및 불러오기

``
#docker saver -o [OUTPUT-FILE] IMAGE

docker save -o my-ubuntu.tar ubuntu
```

### 불러오기
```
docker load -i my-ubuntu.tar
```

